<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GC Perf — Fiches véhicules</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ef233c">

<!-- Firebase (compat version for simpler migration) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // register service worker (PWA)
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js').catch(e => console.warn("SW failed:", e));
    });
  }
</script>

<style>
/* Simple carbon + red theme (keeps layout compact) */
html,body{height:100%}
body{
  margin:0;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#0b0f16;
  background-image:
    linear-gradient(45deg,rgba(0,0,0,.35)25%,transparent 25%,transparent 75%,rgba(0,0,0,.35)75%),
    linear-gradient(45deg,rgba(0,0,0,.35)25%,transparent 25%,transparent 75%,rgba(0,0,0,.35)75%);
  background-size:22px 22px;background-position:0 0,11px 11px;
}
:root{--red:#ef233c;--panel:#0f172a;--muted:#9aa3b2;--stroke:#1f2937}
header{display:flex;align-items:center;gap:12px;padding:12px 18px;background:linear-gradient(180deg,#0f1116,#07080a);border-bottom:1px solid var(--stroke)}
.header-left{display:flex;align-items:center;gap:12px}
.badge{background:var(--red);padding:6px 10px;border-radius:999px;font-weight:700;color:#fff}
main{max-width:1100px;margin:18px auto;padding:12px}
.card{background:var(--panel);border:1px solid var(--stroke);border-radius:12px;padding:12px;margin-bottom:12px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
button,input,select,textarea{padding:10px;border-radius:8px;border:1px solid #243041;background:#071018;color:#e5e7eb}
button.primary{background:var(--red);border-color:#b91c1c}
.list{display:grid;gap:10px}
.item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;border:1px solid #19202a;background:#071018}
.muted{color:var(--muted);font-size:13px}
.small{font-size:13px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-top:1px solid #23303a;padding:8px}
.table th{background:#071221}
.hidden{display:none}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.footer{padding:10px;text-align:center;color:var(--muted);font-size:13px}
@media print{header,button{display:none}body{background:#fff;color:#000} .card{background:#fff;border-color:#ddd}}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <div class="badge">GC PERF</div>
    <div><strong>Fiches véhicules</strong></div>
  </div>
  <div style="flex:1"></div>
  <div class="row">
    <button id="btnNew" class="primary hidden">+ Ajouter fiche</button>
    <button id="btnLogin">Connexion</button>
    <button id="btnLogout" class="hidden">Se déconnecter</button>
    <span id="adminBadge" class="hidden" style="background:#1f2937;padding:6px 10px;border-radius:999px">ADMIN</span>
  </div>
</header>

<main>
  <!-- Filters / actions -->
  <div class="card">
    <div class="row">
      <input id="qImmat" placeholder="Rechercher immatriculation…" style="min-width:220px">
      <select id="qStatus" style="min-width:160px">
        <option value="">Tous</option>
        <option value="en_cours">En cours</option>
        <option value="termine">Terminé</option>
      </select>
      <div style="flex:1"></div>
      <button id="btnExport" class="">Exporter JSON</button>
      <button id="btnImport" class="">Importer JSON</button>
      <input id="fileImport" type="file" accept=".json" style="display:none">
    </div>
    <p class="muted" style="margin-top:8px">Page publique : tout le monde peut voir les fiches. Connecte-toi pour ajouter / modifier / supprimer (admins).</p>
  </div>

  <!-- LISTE PUBLIQUE -->
  <div id="list" class="list"></div>
  <p id="empty" class="muted">Aucun dossier</p>

  <!-- EDITOR -->
  <div id="editor" class="card hidden">
    <div class="row" style="justify-content:space-between">
      <div><button id="btnBack">← Retour</button></div>
      <div class="row">
        <button id="btnDelete" class="hidden">Supprimer</button>
        <button id="btnPDF">PDF</button>
        <button id="btnSave" class="primary hidden">Enregistrer</button>
      </div>
    </div>

    <h3>Identité véhicule</h3>
    <div class="form-grid">
      <div><label>Immatriculation</label><input id="f_immat"></div>
      <div><label>Kilométrage (km)</label><input id="f_km" type="number" min="0"></div>
      <div><label>Marque / Modèle</label><input id="f_model"></div>
      <div><label>Date</label><input id="f_date" type="date"></div>
      <div><label>Client (nom)</label><input id="f_client"></div>
      <div><label>Opérateur</label><input id="f_operator"></div>
    </div>

    <h3 style="margin-top:12px">FICHE DE CONTRÔLES</h3>
    <div style="overflow:auto">
      <table id="checkTable" class="table" style="min-width:880px">
        <thead>
          <tr><th>Rubrique / Contrôle</th><th>Bon état apparent</th><th>À remettre en état</th><th>Commentaire</th></tr>
        </thead>
        <tbody id="checkBody"></tbody>
      </table>
    </div>

    <h4 style="margin-top:12px">Pneumatiques</h4>
    <table class="table" style="min-width:500px">
      <thead><tr><th>Roue</th><th>État</th><th>Pression (bar)</th></tr></thead>
      <tbody id="tiresBody"></tbody>
    </table>

    <div class="form-grid" style="margin-top:12px">
      <div><label>Travaux à faire</label><textarea id="f_todoNow"></textarea></div>
      <div><label>Travaux à prévoir</label><textarea id="f_todoLater"></textarea></div>
    </div>

    <div style="margin-top:12px">
      <label>Observations</label>
      <textarea id="f_obs"></textarea>
    </div>

    <h4 style="margin-top:12px">Pièces prises / référencées</h4>
    <table class="table" style="min-width:600px">
      <thead><tr><th>Référence</th><th>Désignation</th><th>Qté</th><th>Action</th></tr></thead>
      <tbody id="partsBody"></tbody>
    </table>
    <div style="margin-top:8px" class="row">
      <button id="addPart" class="primary hidden">+ Ajouter une pièce</button>
    </div>
  </div>
</main>

<footer class="footer">GC Perf — Application de suivi • lecture publique • connexion requise pour modifier</footer>

<!-- LOGIN MODAL -->
<div id="loginModal" class="hidden" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5)">
  <div style="background:#071018;padding:16px;border-radius:10px;border:1px solid #243041;min-width:320px">
    <h3 style="margin:0 0 8px">Connexion</h3>
    <div class="form-grid" style="grid-template-columns:1fr">
      <div><label>Email</label><input id="loginEmail" type="email"></div>
      <div><label>Mot de passe</label><input id="loginPass" type="password"></div>
    </div>
    <div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end">
      <button id="loginCancel">Annuler</button>
      <button id="loginSubmit" class="primary">Se connecter</button>
    </div>
    <p class="muted" style="margin-top:8px">Créer des comptes dans Firebase Console → Authentication.</p>
  </div>
</div>

<script>
/* ===================== FIREBASE CONFIG =====================
 Replace the object below with your Firebase project config (Console -> Project settings -> SDK).
 Example:
 const firebaseConfig = {
  apiKey: "XXXX",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "12345",
  appId: "1:123:web:abcd"
 };
============================================================= */
const firebaseConfig = {
  apiKey: "REPLACE_ME",
  authDomain: "REPLACE_ME.firebaseapp.com",
  projectId: "REPLACE_ME",
  storageBucket: "REPLACE_ME.appspot.com",
  messagingSenderId: "REPLACE_ME",
  appId: "REPLACE_ME"
};
/* ============================================================ */

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Enable offline persistence for Firestore (best-effort)
if (db.enablePersistence) {
  db.enablePersistence().catch(err => {
    console.warn("Persistence not enabled:", err && err.code);
  });
}

/* ====== UI helpers ====== */
const $ = s => document.querySelector(s);
const el = (t, attrs={}, ...kids) => { const e=document.createElement(t); for(const k in attrs){ if(k==='class') e.className=attrs[k]; else if(k.startsWith('on')&&typeof attrs[k]==='function') e.addEventListener(k.slice(2), attrs[k]); else e.setAttribute(k, attrs[k]); } kids.forEach(k=>k!=null && e.appendChild(typeof k==='string'? document.createTextNode(k):k)); return e; };
const immKey = s => (s||'').toUpperCase().replace(/[\s-]/g,'');

/* ====== Checklist definition (matches your photo) ====== */
const CHECK_DEF = [
  {cat:"VISIBILITÉ", items:["Contrôle des balais d’essuie-glace AV et AR","Contrôle de l’état du pare-brise","Contrôle des rétroviseurs"]},
  {cat:"IDENTIFICATION DU VÉHICULE", items:["État des plaques d’immatriculation (fixation AV et AR et lisibilité)"]},
  {cat:"ÉCLAIRAGE", items:["Feux de position","Feux de croisement","Feux de route","Feux stop","Feux antibrouillard AV et AR","Feux de recul","Clignotants","Feux de détresse"]},
  {cat:"VÉRIFICATION DES NIVEAUX", items:["Liquide lave-glace","Liquide de refroidissement","Contrôle du niveau de liquide de frein","Contrôle du niveau d’huile moteur"]},
  {cat:"FREINAGE", items:["Contrôle des plaquettes de frein","Contrôle des disques avant (sans dépose de roues)","Système d’assistance de freinage","Contrôle du témoin du niveau de liquide de frein"]},
  {cat:"DIRECTION", items:["Contrôle du système d’assistance de direction","Volant de direction"]},
  {cat:"AMORTISSEURS", items:["État des amortisseurs"]},
  {cat:"AUTRES", items:["Contrôle de l’état de l’échappement et des fixations","Contrôle du niveau du liquide de direction assistée","Contrôle de l’avertisseur sonore"]},
  {cat:"ÉQUIPEMENTS", items:["Support de roue de secours","Contrôle des ceintures de sécurité"]},
  {cat:"PNEUMATIQUES", items:["Pression des pneumatiques","État des pneumatiques"]}
];
const TIRES_POS = ["AVG","AVD","ARG","ARD","RS"];

/* ====== App state ====== */
let currentUser = null;
let isAdmin = false;
let unsubscribeList = null;
let currentDocId = null; // when editing
let draft = {checks:{},comments:{},pneus:[],pieces:[]};

/* ====== Auth UI ====== */
auth.onAuthStateChanged(async (u)=>{
  currentUser = u || null;
  if(currentUser){
    // check admin role
    const r = await db.collection('roles').doc(currentUser.uid).get().catch(()=>null);
    isAdmin = !!(r && r.exists && r.data().admin);
  } else {
    isAdmin = false;
  }
  // UI toggles
  $("#btnLogin").classList.toggle("hidden", !!currentUser);
  $("#btnLogout").classList.toggle("hidden", !currentUser);
  $("#adminBadge").classList.toggle("hidden", !isAdmin);
  document.querySelectorAll(".hidden").forEach(()=>{}); // keep existing classes
  // show create/edit controls to authenticated users
  document.getElementById("btnNew").classList.toggle("hidden", !currentUser);
  document.getElementById("btnSave").classList.toggle("hidden", !currentUser);
  document.getElementById("addPart").classList.toggle("hidden", !currentUser);
  // Show delete only for admin
  document.getElementById("btnDelete").classList.toggle("hidden", !isAdmin);
});

/* ====== Build check table for editor ====== */
function buildCheckTable(checks={}, comments={}){
  const body = $("#checkBody");
  body.innerHTML = "";
  CHECK_DEF.forEach(group=>{
    body.appendChild(el("tr",{}, el("th",{colspan:4}, group.cat)));
    group.items.forEach(txt=>{
      const key = group.cat + " | " + txt;
      const ok = el("input",{type:"radio", name:key});
      const bad = el("input",{type:"radio", name:key});
      const com = el("input",{type:"text", value:comments[key]||"", placeholder:"Commentaire (optionnel)"});
      if(checks[key] === "ok") ok.checked = true;
      if(checks[key] === "remettre") bad.checked = true;
      ok.addEventListener("change", ()=> draft.checks[key] = "ok");
      bad.addEventListener("change", ()=> draft.checks[key] = "remettre");
      com.addEventListener("change", ()=> draft.comments[key] = com.value.trim());
      const tr = el("tr",{}, el("td",{}, txt), el("td",{}, ok), el("td",{}, bad), el("td",{}, com));
      tr.addEventListener("dblclick", ()=>{ ok.checked=false; bad.checked=false; com.value=''; delete draft.checks[key]; delete draft.comments[key]; });
      body.appendChild(tr);
    });
  });
}

/* ====== Tires table ====== */
function buildTires(pneus=[]){
  const tb = $("#tiresBody"); tb.innerHTML = "";
  TIRES_POS.forEach(pos=>{
    const row = pneus.find(p=>p.pos===pos) || {etat:"Bon", pression:""};
    const sel = el("select",{}, ...["Bon","Moyen","À remplacer"].map(s=>el("option",{value:s, ...(row.etat===s?{selected:true}:{})}, s)));
    const pr  = el("input",{type:"number", step:"0.1", min:"0", value: row.pression||""});
    sel.addEventListener("change", ()=> {
      const p = draft.pneus.find(x=>x.pos===pos);
      if(p) p.etat = sel.value; else draft.pneus.push({pos, etat: sel.value, pression: pr.value});
    });
    pr.addEventListener("change", ()=> {
      const p = draft.pneus.find(x=>x.pos===pos);
      if(p) p.pression = pr.value; else draft.pneus.push({pos, etat: sel.value, pression: pr.value});
    });
    tb.appendChild(el("tr",{}, el("td",{},pos), el("td",{},sel), el("td",{},pr)));
  });
}

/* ====== parts table ====== */
function addPartRow(ref="", label="", q="1"){
  const tr = el("tr");
  const r = el("input",{value:ref, placeholder:"Réf"});
  const l = el("input",{value:label, placeholder:"Désignation"});
  const qI = el("input",{value:q, type:"number", min:"0", step:"1"});
  const del = el("button",{onclick:()=>tr.remove()}, "Supprimer");
  tr.append(el("td",{},r), el("td",{},l), el("td",{},qI), el("td",{},del));
  $("#partsBody").appendChild(tr);
}

/* ====== LISTENERS & CRUD ====== */
function attachListListener(){
  if(unsubscribeList) unsubscribeList();
  let q = db.collection('fiches').orderBy('createdAt','desc');
  const status = $("#qStatus").value;
  if(status) q = q.where('status','==',status);
  unsubscribeList = q.onSnapshot(snap=>{
    const list = $("#list"); list.innerHTML = "";
    let count = 0;
    const immFilter = ($("#qImmat").value||"").toUpperCase();
    snap.forEach(doc=>{
      const d = doc.data();
      if(immFilter && !(d.immat||"").toUpperCase().includes(immFilter)) return;
      count++;
      const left = el("div",{}, el("div",{}, (d.immat||"").toUpperCase() + " — " + (d.model || "—")), el("div",{class:"muted"}, `Client: ${d.client||"—"} · KM: ${d.km||"—"} · ${d.date||"—"}`));
      const tag = el("div",{}, d.status==="termine" ? "Terminé" : "En cours");
      const open = el("button",{onclick:()=>openEditor(doc.id)}, "Ouvrir");
      const del  = el("button",{onclick:()=>deleteFiche(doc.id)}, "Supprimer");
      del.classList.toggle("hidden", !isAdmin);
      const row = el("div",{class:"item"}, left, el("div",{class:"row"}, tag, open, del));
      list.appendChild(row);
    });
    $("#empty").classList.toggle("hidden", count>0);
  }, err=>{ console.error(err); alert("Erreur lecture fiches: "+err.message); });
}

/* Create or update */
async function saveFiche(){
  if(!currentUser){ alert("Connecte-toi pour enregistrer."); return; }
  const immat = ($("#f_immat").value||"").trim().toUpperCase();
  if(!immat){ alert("Immatriculation requise"); return; }

  // collect pieces
  const pieces = Array.from(document.querySelectorAll("#partsBody tr")).map(tr=>{
    const [r,l,q] = tr.querySelectorAll("input");
    return {ref:(r.value||"").trim(), label:(l.value||"").trim(), qte:(q.value||"").trim()};
  }).filter(p=>p.ref||p.label||p.qte);

  const data = {
    immat,
    model: ($("#f_model").value||"").trim(),
    client: ($("#f_client").value||"").trim(),
    km: ($("#f_km").value)? Number($("#f_km").value) : null,
    date: ($("#f_date").value) || new Date().toISOString().slice(0,10),
    operator: ($("#f_operator").value||"").trim(),
    status: ($("#qStatusEditor") ? $("#qStatusEditor").value : (document.getElementById('f_status') ? document.getElementById('f_status').value : "en_cours")),
    todoNow: ($("#f_todoNow").value||"").split("\n").map(s=>s.trim()).filter(Boolean),
    todoLater: ($("#f_todoLater").value||"").split("\n").map(s=>s.trim()).filter(Boolean),
    obs: ($("#f_obs").value||"").trim(),
    checks: draft.checks,
    comments: draft.comments,
    pneus: draft.pneus,
    pieces
  };

  try{
    if(currentDocId){
      // update — Firestore rules will check permissions
      await db.collection('fiches').doc(currentDocId).update(data);
    } else {
      await db.collection('fiches').add({
        ...data,
        createdBy: currentUser.uid,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
    }
    alert("Fiche sauvegardée.");
    // close editor
    closeEditor();
  }catch(e){
    console.error(e);
    alert("Erreur sauvegarde: " + e.message);
  }
}

/* open new or existing */
async function openEditor(id){
  if(!currentUser){ alert("Connecte-toi pour éditer."); return; }
  $("#editor").classList.remove("hidden");
  $("#list").classList.add("hidden");
  $("#empty").classList.add("hidden");
  $("#btnSave").classList.toggle("hidden", !currentUser);
  $("#addPart").classList.toggle("hidden", !currentUser);
  $("#btnDelete").classList.toggle("hidden", !isAdmin);

  currentDocId = id || null;
  draft = {checks:{},comments:{},pneus:[],pieces:[]};
  $("#partsBody").innerHTML = "";

  if(id){
    const snap = await db.collection('fiches').doc(id).get();
    if(!snap.exists){ alert("Fiche introuvable."); return; }
    const d = snap.data();
    $("#f_immat").value = d.immat||"";
    $("#f_km").value = d.km||"";
    $("#f_model").value = d.model||"";
    $("#f_date").value = d.date||"";
    $("#f_client").value = d.client||"";
    $("#f_operator").value = d.operator||"";
    $("#f_todoNow").value = (d.todoNow||[]).join("\n");
    $("#f_todoLater").value = (d.todoLater||[]).join("\n");
    $("#f_obs").value = d.obs||"";
    draft.checks = {...(d.checks||{})};
    draft.comments = {...(d.comments||{})};
    draft.pneus = Array.isArray(d.pneus)? d.pneus.slice() : [];
    (d.pieces||[]).forEach(p=>addPartRow(p.ref,p.label,p.qte));
  } else {
    // new
    $("#f_immat").value=""; $("#f_km").value=""; $("#f_model").value=""; $("#f_date").value="";
    $("#f_client").value=""; $("#f_operator").value=""; $("#f_todoNow").value=""; $("#f_todoLater").value=""; $("#f_obs").value="";
    addPartRow();
  }

  buildCheckTable(draft.checks, draft.comments);
  buildTires(draft.pneus);
}

/* close editor */
function closeEditor(){
  $("#editor").classList.add("hidden");
  $("#list").classList.remove("hidden");
  attachListListener();
  currentDocId = null;
  draft = {checks:{},comments:{},pneus:[],pieces:[]};
}

/* delete (admin only) */
async function deleteFiche(id){
  if(!confirm("Confirmer suppression ?")) return;
  try{
    await db.collection('fiches').doc(id).delete();
    alert("Supprimé");
  }catch(e){ alert("Erreur suppression: "+e.message); }
}

/* EXPORT / IMPORT JSON (backup) */
$("#btnExport").addEventListener("click", async ()=>{
  const snap = await db.collection('fiches').orderBy('createdAt','desc').get();
  const arr = snap.docs.map(d=>({id:d.id, ...d.data()}));
  const blob = new Blob([JSON.stringify(arr,null,2)], {type:"application/json"});
  const a = document.createElement("a"); a.href = URL.createObjectURL(blob); a.download="gcperf_fiches.json"; a.click(); URL.revokeObjectURL(a.href);
});
$("#btnImport").addEventListener("click", ()=>$("#fileImport").click());
$("#fileImport").addEventListener("change", async (e)=>{
  const f = e.target.files[0]; if(!f) return;
  try{
    const txt = await f.text();
    const arr = JSON.parse(txt);
    // import: write each doc as new doc (or upsert if id present)
    const batch = db.batch ? db.batch() : null;
    for(const rec of arr){
      const docRef = rec.id ? db.collection('fiches').doc(rec.id) : db.collection('fiches').doc();
      const payload = Object.assign({}, rec);
      delete payload.id;
      await docRef.set(payload);
    }
    alert("Import terminé.");
  }catch(err){ alert("Fichier invalide: " + err.message); }
});

/* LOGIN UI */
$("#btnLogin").addEventListener("click", ()=> $("#loginModal").classList.remove("hidden"));
$("#loginCancel").addEventListener("click", ()=> $("#loginModal").classList.add("hidden"));
$("#loginSubmit").addEventListener("click", async ()=>{
  const email = $("#loginEmail").value.trim();
  const pass  = $("#loginPass").value;
  try{
    await auth.signInWithEmailAndPassword(email, pass);
    $("#loginModal").classList.add("hidden");
  }catch(e){ alert("Connexion impossible: " + e.message); }
});
$("#btnLogout").addEventListener("click", ()=> auth.signOut());

/* Editor buttons */
$("#btnBack").addEventListener("click", closeEditor);
$("#btnSave").addEventListener("click", saveFiche);
$("#btnPDF").addEventListener("click", ()=> window.print());
$("#addPart").addEventListener("click", ()=> addPartRow());
$("#btnNew").addEventListener("click", ()=> openEditor(null));
$("#btnDelete").addEventListener("click", async ()=> { if(currentDocId) await deleteFiche(currentDocId); closeEditor(); });

/* Live list attachment */
function attachListListener(){
  if(unsubscribeList) unsubscribeList();
  let q = db.collection('fiches').orderBy('createdAt','desc');
  const status = $("#qStatus").value;
  if(status) q = q.where('status','==', status);
  unsubscribeList = q.onSnapshot(snap=>{
    const list = $("#list"); list.innerHTML = "";
    let count = 0;
    const immFilter = ($("#qImmat").value||"").toUpperCase();
    snap.forEach(doc=>{
      const d = doc.data();
      if(immFilter && !(d.immat||"").toUpperCase().includes(immFilter)) return;
      count++;
      const left = el("div",{}, el("div",{}, (d.immat||"").toUpperCase()+" — "+(d.model||"—")), el("div",{class:"muted"}, `Client: ${d.client||"—"} · KM: ${d.km||"—"} · ${d.date||"—"}`));
      const open = el("button",{onclick:()=>openEditor(doc.id)}, "Ouvrir");
      const del  = el("button",{onclick:()=>deleteFiche(doc.id)}, "Supprimer"); del.classList.toggle("hidden", !isAdmin);
      const row  = el("div",{class:"item"}, left, el("div",{class:"row"}, open, del));
      list.appendChild(row);
    });
    $("#empty").classList.toggle("hidden", count>0);
  }, err => { console.error(err); alert("Erreur lecture fiches: " + err.message); });
}
attachListListener();

/* Init UI state */
document.getElementById("btnNew").classList.toggle("hidden", true);
document.getElementById("btnSave").classList.toggle("hidden", true);
document.getElementById("addPart").classList.toggle("hidden", true);
</script>
</body>
</html>
